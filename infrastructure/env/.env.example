# =============================================================================
# Environment Variables Template - Image RAG Application
# =============================================================================
# To setup the environment:
#   export APP_ENVIRONMENT=development         # For local development
#   export APP_ENVIRONMENT=test                # For testing
#   export APP_ENVIRONMENT=staging             # For staging environment
#   export APP_ENVIRONMENT=production          # For production
#
# Then run:  ./gradlew bootRun
#
# IMPORTANT: Never commit .env.* files (except .env.example) to version control!
# =============================================================================

# =============================================================================
# Application Configuration
# =============================================================================
# Environment identifier (development, test, staging, prod)
APP_ENVIRONMENT=development

# Application name (used in logging and monitoring)
APP_NAME=image-rag

# Server port
# local: 8080 | Render: 10000 (injected by platform)
SERVER_PORT=8080

# =============================================================================
# Deployment Configuration (Render)
# =============================================================================
# Render API Key (required for GitHub Actions deployment)
# Generate at: https://dashboard.render.com/u/settings#api-keys
# Store in: GitHub Repository Secrets as RENDER_API_KEY
RENDER_API_KEY=rnd_your-render-api-key-here

# Render Service IDs (from service URL: dashboard.render.com/web/srv-XXXXX)
# Store in: GitHub Repository Variables
# dev service  → RENDER_SERVICE_ID_DEV
# prod service → RENDER_SERVICE_ID_PROD
RENDER_SERVICE_ID_DEV=srv-your-dev-service-id
RENDER_SERVICE_ID_PROD=srv-your-prod-service-id

# Render Domain (public URL of your service)
# Store in: GitHub Environment Variables
# dev:  https://image-rag-dev.onrender.com
# prod: https://image-rag-prod.onrender.com
RENDER_DOMAIN=https://image-rag-dev.onrender.com

# =============================================================================
# Database Configuration (MongoDB)
# =============================================================================
# MongoDB connection URI
# local:   mongodb://localhost:27017/imagerag_dev
# Render:  Use MongoDB Atlas free tier (512MB)
MONGODB_URI=mongodb://localhost:27017/imagerag_dev
MONGODB_USERNAME=
MONGODB_PASSWORD=

# =============================================================================
# Spring AI / OpenAI Configuration
# =============================================================================
# OpenAI API Key (required for image analysis)
# Get your key from: https://platform.openai.com/api-keys
# dev/test: Use a dev key or mock | staging/prod: Use appropriate keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI Model for image analysis
# dev: gpt-4o-mini (cheaper) | prod: gpt-4o
OPENAI_MODEL=gpt-4o

# OpenAI API base URL (change for Azure OpenAI or proxies)
OPENAI_BASE_URL=https://api.openai.com

# Maximum tokens for response
# dev: 500 | prod: 1000
OPENAI_MAX_TOKENS=1000

# =============================================================================
# Security Configuration
# =============================================================================
# JWT secret key (use a strong random string in production)
# Generate with: openssl rand -base64 64
# CRITICAL: Use unique secrets per environment!
JWT_SECRET=your-super-secret-jwt-key-change-in-production

# JWT expiration time in milliseconds
# dev: 3600000 (1 hour) | prod: 86400000 (24 hours)
JWT_EXPIRATION=86400000

# CORS allowed origins (comma-separated)
# dev:     * (or http://localhost:3000)
# staging: https://staging.yourdomain.com
# prod:    https://yourdomain.com
CORS_ALLOWED_ORIGINS=http://localhost:3000

# =============================================================================
# Logging Configuration
# =============================================================================
# Log levels: TRACE, DEBUG, INFO, WARN, ERROR

# Root log level
# dev: INFO | test: WARN | staging: INFO | prod: WARN
LOG_LEVEL_ROOT=WARN

# Application log level
# dev: DEBUG | test: WARN | staging: INFO | prod: INFO
LOG_LEVEL_APP=INFO

# Spring framework log level
# dev: DEBUG | test: WARN | staging: INFO | prod: WARN
LOG_LEVEL_SPRING=INFO

# Web/HTTP log level
# dev: DEBUG | test: WARN | staging: INFO | prod: WARN
LOG_LEVEL_WEB=INFO

# Security log level
# dev: DEBUG | test: WARN | staging: INFO | prod: WARN
LOG_LEVEL_SECURITY=INFO

# MongoDB log level
# dev: DEBUG | test: WARN | staging: WARN | prod: WARN
LOG_LEVEL_MONGODB=WARN

# Log pattern (optional, has default)
# LOG_PATTERN=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# =============================================================================
# DevTools Configuration
# =============================================================================
# Enable Spring DevTools (hot reload)
# dev: true | test/staging/prod: false
DEVTOOLS_ENABLED=false

# =============================================================================
# Error Response Configuration
# =============================================================================
# Include stack trace in error responses
# dev: on-param | test/staging/prod: never
ERROR_INCLUDE_STACKTRACE=never

# Include exception class in error responses
# dev: true | test/staging/prod: false
ERROR_INCLUDE_EXCEPTION=false

# Include message in error responses
ERROR_INCLUDE_MESSAGE=always

# Include binding errors in error responses
ERROR_INCLUDE_BINDING_ERRORS=always

# =============================================================================
# Actuator / Monitoring Configuration
# =============================================================================
# Actuator base path
ACTUATOR_BASE_PATH=/actuator

# Exposed actuator endpoints (comma-separated)
# dev:  * (all)
# test: health,info
# prod: health,info,metrics,prometheus
ACTUATOR_ENDPOINTS=health,info

# Health endpoint detail level
# dev: always | staging/prod: when-authorized
ACTUATOR_HEALTH_DETAILS=when-authorized

# Show env values in actuator
# dev: always | staging/prod: never
ACTUATOR_ENV_SHOW_VALUES=never

# =============================================================================
# OpenAPI / Swagger Configuration
# =============================================================================
# Enable Swagger UI
# dev/staging: true | prod: false (usually)
SWAGGER_ENABLED=true

# Enable "Try it out" button
# dev: true | staging/prod: false
SWAGGER_TRY_IT_OUT=false

# =============================================================================
# Jackson Configuration
# =============================================================================
# Indent JSON output (pretty print)
# dev: true | test/staging/prod: false
JACKSON_INDENT_OUTPUT=false

# =============================================================================
# File Upload Configuration
# =============================================================================
# Maximum file size for image uploads
MAX_FILE_SIZE=10MB

# Maximum request size
MAX_REQUEST_SIZE=15MB

# Allowed image types (comma-separated MIME types)
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/gif,image/webp

# =============================================================================
# Rate Limiting
# =============================================================================
# Enable rate limiting
# dev: false | staging/prod: true
RATE_LIMIT_ENABLED=false

# Requests per minute per user
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# =============================================================================
# GitHub Actions / CI Configuration Reference
# =============================================================================
# These are stored in GitHub, not in env files. Listed here for reference.
#
# Repository Secrets (Settings → Secrets → Actions):
#   RENDER_API_KEY          - Render API key for deployments
#
# Repository Variables (Settings → Variables → Actions):
#   RENDER_SERVICE_ID_DEV   - Service ID for dev Render service
#   RENDER_SERVICE_ID_PROD  - Service ID for prod Render service
#
# Environment Secrets (Settings → Environments → {env} → Secrets):
#   JWT_SECRET              - Unique per environment!
#   OPENAI_API_KEY          - Can differ per environment
#
# Environment Variables (Settings → Environments → {env} → Variables):
#   RENDER_DOMAIN           - Public URL for health checks
#   APP_ENVIRONMENT         - development, test, staging, prod
#   APP_NAME                - image-rag
#   LOG_LEVEL_APP           - DEBUG, INFO, WARN
#   ERROR_INCLUDE_STACKTRACE - always, never
# =============================================================================
